@use "lib/viewport";

html {
  font-size: 14px;
  color: var(--text-primary);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  
  /* Enhanced desktop typography */
  @media (min-width: 1024px) {
    font-size: var(--desktop-font-size);
    line-height: var(--desktop-line-height);
  }
}

html,
body {
  background: var(--bg-gradient);
  margin: 0;
  padding: 0;
  transition: background var(--transition-normal);

  @include viewport.until(md) {
    background: var(--bg-primary);
  }
}

// Reddit Social Theme body class support
body.reddit-social-theme {
  &.reddit-compact-view {
    .reddit-post-card {
      padding: 8px 12px;
      
      .reddit-post-main {
        .reddit-post-title {
          font-size: 14px;
          line-height: 1.3;
        }
        
        .reddit-post-excerpt {
          display: none;
        }
      }
      
      .reddit-post-thumbnail {
        width: 40px;
        height: 40px;
      }
    }
  }
}

:root {
  --d-max-width: 1400px; /* Increased for better desktop experience */
  --wrap-px: 1.5rem; /* Better desktop padding */
  --column-navigation-mini: 3rem;
  --column-sidebar: 340px; /* Wider sidebar for better content */
  --column-navigation: minmax(0, 256px);
  --column-content: minmax(720px, 1fr); /* Wider main content */
  --mobile-nav-h: 48px;
  --header-height: 56px; /* Taller header for desktop */
  --post-card-spacing: 12px; /* More spacing between cards */
  --reddit-border-radius: 8px; /* Slightly larger radius */
  
  /* Enhanced desktop-specific variables */
  --desktop-font-size: 15px;
  --desktop-line-height: 1.6;
  --desktop-content-padding: 32px;
  --desktop-sidebar-gap: 32px;
  --desktop-hover-scale: 1.02;
  --desktop-transition-speed: 0.25s;
}

#main {
  padding-top: var(--header-offset);
}

body {
  &.user-invites-page,
  &.user-summary-page {
    #main-outlet-wrapper #main-outlet {
      padding-top: 1rem;
    }
  }

  &.admin-interface {
    #main-outlet-wrapper #main-outlet {
      padding-right: 1rem;
      padding-left: 1rem;
    }
  }

  &.has-sidebar-page,
  & {
    .wrap {
      box-sizing: border-box;
      max-width: var(--d-max-width);
      margin: 0 auto;
      padding: 0 var(--wrap-px);
    }

    #main-outlet-wrapper {
      display: grid;
      grid-template-areas: "content sidebar";
      grid-template-columns: var(--column-content) var(--column-sidebar);
      gap: var(--desktop-sidebar-gap);
      box-sizing: border-box;
      margin: 0 auto;
      padding: var(--desktop-content-padding) var(--wrap-px);
      max-width: var(--d-max-width);
      
      /* Enhanced desktop spacing */
      @media (min-width: 1440px) {
        gap: 40px;
        padding: 40px var(--wrap-px);
      }

      @include viewport.until(lg) {
        grid-template-columns: 1fr var(--column-sidebar);
        gap: 20px;
        padding: 20px var(--wrap-px);
      }

      @include viewport.until(md) {
        grid-template-areas: "content";
        grid-template-columns: 1fr;
        gap: 0;
        padding: 8px;

        .blocks {
          display: none;
        }
      }

      .blocks {
        grid-area: sidebar;
        position: sticky;
        top: calc(var(--header-height) + 20px);
        align-self: start;
        max-height: calc(100vh - var(--header-height) - 40px);
        overflow-y: auto;
      }

      .sidebar-wrapper {
        display: none; /* Hide traditional sidebar in favor of Reddit-style */
      }

      #main-outlet {
        grid-area: content;
        background: transparent;
        border: none;
        border-radius: 0;
        padding: 0;
        margin: 0;
        min-height: calc(100vh - var(--header-height) - 40px);

        /* Reddit-style post feed */
        .topic-list-container,
        .topic-list {
          background: transparent;
          border: none;
          border-radius: 0;
        }
      }
    }
  }
}

@at-root {
  [class*="user-"] {
    &[class*="-page"] {
      #main-outlet-wrapper #main-outlet {
        box-sizing: border-box;
        max-width: 100vw;
        padding-right: 1rem;
        padding-left: 1rem;
      }
    }
  }
}

#user-card {
  background-color: var(--neutral-100);
}
