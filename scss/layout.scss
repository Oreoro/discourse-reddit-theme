@use "lib/viewport";

html {
  font-size: 14px;
  color: var(--text-primary);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

html,
body {
  background: var(--bg-gradient);
  margin: 0;
  padding: 0;
  transition: background var(--transition-normal);

  @include viewport.until(md) {
    background: var(--bg-primary);
  }
}

:root {
  --d-max-width: 1200px;
  --wrap-px: 1rem;
  --column-navigation-mini: 3rem;
  --column-sidebar: 312px;
  --column-navigation: minmax(0, 256px);
  --column-content: minmax(640px, 1fr);
  --mobile-nav-h: 48px;
  --header-height: 48px;
  --post-card-spacing: 8px;
  --reddit-border-radius: 4px;
}

#main {
  padding-top: var(--header-offset);
}

body {
  &.user-invites-page,
  &.user-summary-page {
    #main-outlet-wrapper #main-outlet {
      padding-top: 1rem;
    }
  }

  &.admin-interface {
    #main-outlet-wrapper #main-outlet {
      padding-right: 1rem;
      padding-left: 1rem;
    }
  }

  &.has-sidebar-page,
  & {
    .wrap {
      box-sizing: border-box;
      max-width: var(--d-max-width);
      margin: 0 auto;
      padding: 0 var(--wrap-px);
    }

    #main-outlet-wrapper {
      display: grid;
      grid-template-areas: "content sidebar";
      grid-template-columns: var(--column-content) var(--column-sidebar);
      gap: 24px;
      box-sizing: border-box;
      margin: 0 auto;
      padding: 20px var(--wrap-px);
      max-width: var(--d-max-width);

      @include viewport.until(lg) {
        grid-template-columns: 1fr var(--column-sidebar);
        gap: 16px;
        padding: 16px var(--wrap-px);
      }

      @include viewport.until(md) {
        grid-template-areas: "content";
        grid-template-columns: 1fr;
        gap: 0;
        padding: 8px;

        .blocks {
          display: none;
        }
      }

      .blocks {
        grid-area: sidebar;
        position: sticky;
        top: calc(var(--header-height) + 20px);
        align-self: start;
        max-height: calc(100vh - var(--header-height) - 40px);
        overflow-y: auto;
      }

      .sidebar-wrapper {
        display: none; /* Hide traditional sidebar in favor of Reddit-style */
      }

      #main-outlet {
        grid-area: content;
        background: transparent;
        border: none;
        border-radius: 0;
        padding: 0;
        margin: 0;
        min-height: calc(100vh - var(--header-height) - 40px);

        /* Reddit-style post feed */
        .topic-list-container,
        .topic-list {
          background: transparent;
          border: none;
          border-radius: 0;
        }
      }
    }
  }
}

@at-root {
  [class*="user-"] {
    &[class*="-page"] {
      #main-outlet-wrapper #main-outlet {
        box-sizing: border-box;
        max-width: 100vw;
        padding-right: 1rem;
        padding-left: 1rem;
      }
    }
  }
}

#user-card {
  background-color: var(--neutral-100);
}
